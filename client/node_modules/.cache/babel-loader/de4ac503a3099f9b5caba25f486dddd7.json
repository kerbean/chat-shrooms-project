{"ast":null,"code":"import _classCallCheck from \"/Users/helengrace.delrosario/Desktop/BOOTCAMP/ACTIVITIES/WEEK23/PROJECT 3/Unsolved/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/helengrace.delrosario/Desktop/BOOTCAMP/ACTIVITIES/WEEK23/PROJECT 3/Unsolved/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/helengrace.delrosario/Desktop/BOOTCAMP/ACTIVITIES/WEEK23/PROJECT 3/Unsolved/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/helengrace.delrosario/Desktop/BOOTCAMP/ACTIVITIES/WEEK23/PROJECT 3/Unsolved/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/helengrace.delrosario/Desktop/BOOTCAMP/ACTIVITIES/WEEK23/PROJECT 3/Unsolved/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/helengrace.delrosario/Desktop/BOOTCAMP/ACTIVITIES/WEEK23/PROJECT 3/Unsolved/client/src/components/Main/Main.js\";\nimport React, { Component } from 'react'; //import logo from '../../images/logo.svg';\n\nimport './Main.css';\nimport Form from '../Form/Form';\nimport App from '../App/App';\nimport Nickname from \"../Nickname/Nickname\";\nimport Footer from \"../Footer\";\nimport firebase from 'firebase';\nimport firebaseConfig from '../../config';\nimport axios from 'axios';\nimport dotenv from 'dotenv';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\nfirebase.initializeApp(firebaseConfig);\n\nvar Main =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Main, _Component);\n\n  function Main(props) {\n    var _this;\n\n    _classCallCheck(this, Main);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Main).call(this, props));\n    _this.state = {\n      user: null,\n      category: null,\n      exists: null\n    };\n    return _this;\n  }\n\n  _createClass(Main, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      firebase.auth().onAuthStateChanged(function (user) {\n        _this2.setState({\n          user: user\n        });\n\n        _this2.doesUserExist(); // this.props.history.push('/path');\n\n      });\n    }\n  }, {\n    key: \"handleSignIn\",\n    value: function handleSignIn() {\n      var provider = new firebase.auth.GoogleAuthProvider();\n      firebase.auth().signInWithPopup(provider);\n    } // renderRedirect = () => {\n    //     return <Redirect to=\"/App\" />\n    // }\n\n  }, {\n    key: \"handleLogOut\",\n    value: function handleLogOut() {\n      firebase.auth().signOut();\n    }\n  }, {\n    key: \"chooseCategory1\",\n    value: function chooseCategory1() {\n      this.setState({\n        category: \"random\"\n      });\n    }\n  }, {\n    key: \"chooseCategory2\",\n    value: function chooseCategory2() {\n      this.setState({\n        category: \"disney\"\n      });\n    }\n  }, {\n    key: \"chooseCategory3\",\n    value: function chooseCategory3() {\n      this.setState({\n        category: \"tvseries\"\n      });\n    }\n  }, {\n    key: \"chooseCategory4\",\n    value: function chooseCategory4() {\n      this.setState({\n        category: \"games\"\n      });\n    }\n  }, {\n    key: \"doesUserExist\",\n    value: function doesUserExist() {\n      var _this3 = this;\n\n      console.log(\"doesUserExist - START\");\n      axios.get('/api/email/' //+ 'test1@gmail.com') \n      + this.state.user.email).then(function (res) {\n        var persons = res.data;\n        console.log(\"success + \" + persons);\n\n        _this3.setState({\n          exists: persons\n        });\n\n        if (!persons) {\n          var body = {\n            email: _this3.state.user.email,\n            nickname: _this3.state.user.displayName\n          };\n          console.log(\"Body: \" + JSON.stringify(body));\n          axios.post('/api/createUser', body);\n        }\n\n        console.log(\"Exists: \" + _this3.state.exists);\n      }).catch(function (err) {\n        console.log(\"GET ERR: \" + err);\n        console.log(\"URI: \" + process.env.MONGODB_URI);\n      }); // if (!this.state.exists) {\n      //     let body = {\n      //         email: this.state.user.email,\n      //         nickname: this.state.user.displayName\n      //     }\n      //     console.log(\"Body: \" + JSON.stringify(body));\n      //     axios.post(process.env.MONGODB_URI + '/api/createUser', body)\n      // }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"app__header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, this.state.user ? // <button>\n      //     Change Nickname\n      // </button>\n      // { this.doesUserExist.bind(this) }\n      React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, this.state.exists ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Welcome, \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, this.state.exists.nickname)) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Welcome, \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, this.state.user.displayName))) : React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"CHAT SHROOMS\"), this.state.user ? // <button>\n      //     Change Nickname\n      // </button>\n      React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(Nickname, {\n        email: this.state.email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })), this.state.user ? React.createElement(\"div\", {\n        className: \"app__list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, console.log(\"User to Form: \" + this.state.user.displayName), console.log(\"Email to Form: \" + this.state.user.email), console.log(\"Category: \" + this.state.category)) : React.createElement(\"span\", {\n        className: \"login-first\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Please login first before proceeding with the chat\"), this.state.user ? React.createElement(\"div\", {\n        className: \"app__list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, console.log(\"User to Form: \" + this.state.user.displayName), console.log(\"Email to Form: \" + this.state.user.email), console.log(\"Category: \" + this.state.category), React.createElement(\"span\", {\n        className: \"login-first\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Please choose a category to proceed\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"app__button rounded \",\n        onClick: this.chooseCategory1.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"RANDOM\"), React.createElement(\"button\", {\n        className: \"app__button rounded \",\n        onClick: this.chooseCategory2.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"DISNEY\"), React.createElement(\"button\", {\n        className: \"app__button rounded \",\n        onClick: this.chooseCategory3.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"TV SERIES\"), React.createElement(\"button\", {\n        className: \"app__button rounded \",\n        onClick: this.chooseCategory4.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"GAMES\"))) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), this.state.category && this.state.user ? React.createElement(\"div\", {\n        className: \"app__list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, console.log(\"User to Form: \" + this.state.user.displayName), console.log(\"Email to Form: \" + this.state.user.email), console.log(\"Category: \" + this.state.category), React.createElement(Form, {\n        user: this.state.user,\n        category: this.state.category,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), !this.state.user ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"app__button rounded \",\n        onClick: this.handleSignIn.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Sign in\")) : // this.context.router.push(\"./App/App\")\n      // <Router>\n      //     <Route exact path=\"/\">\n      //         {console.log(\"We were here\")}\n      //         {this.state.user ? <Redirect to=\"/App\" /> : <Main />}\n      // </Route>\n      React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"app__button rounded \",\n        onClick: this.handleLogOut.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"Logout\")) // {/* </Router> */}\n      // <button\n      //     className=\"app__button rounded \"\n      //     onClick={this.handleLogOut.bind(this)}\n      // >\n      //     Logout\n      //     </button>\n      , React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Main;\n}(Component);\n\nexport default Main;","map":{"version":3,"sources":["/Users/helengrace.delrosario/Desktop/BOOTCAMP/ACTIVITIES/WEEK23/PROJECT 3/Unsolved/client/src/components/Main/Main.js"],"names":["React","Component","Form","App","Nickname","Footer","firebase","firebaseConfig","axios","dotenv","BrowserRouter","Router","Route","Redirect","initializeApp","Main","props","state","user","category","exists","auth","onAuthStateChanged","setState","doesUserExist","provider","GoogleAuthProvider","signInWithPopup","signOut","console","log","get","email","then","res","persons","data","body","nickname","displayName","JSON","stringify","post","catch","err","process","env","MONGODB_URI","chooseCategory1","bind","chooseCategory2","chooseCategory3","chooseCategory4","handleSignIn","handleLogOut"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n//import logo from '../../images/logo.svg';\nimport './Main.css';\nimport Form from '../Form/Form';\nimport App from '../App/App';\nimport Nickname from \"../Nickname/Nickname\";\nimport Footer from \"../Footer\";\nimport firebase from 'firebase';\nimport firebaseConfig from '../../config';\nimport axios from 'axios';\nimport dotenv from 'dotenv';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\n\n\nfirebase.initializeApp(firebaseConfig);\nclass Main extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            user: null,\n            category: null,\n            exists: null,\n        }\n    }\n\n    componentDidMount() {\n        firebase.auth().onAuthStateChanged(user => {\n            this.setState({ user: user });\n            this.doesUserExist();\n            // this.props.history.push('/path');\n        });\n    }\n\n    handleSignIn() {\n        const provider = new firebase.auth.GoogleAuthProvider();\n        firebase.auth().signInWithPopup(provider);\n    }\n\n    // renderRedirect = () => {\n    //     return <Redirect to=\"/App\" />\n    // }\n\n    handleLogOut() {\n        firebase.auth().signOut();\n    }\n\n    chooseCategory1() {\n        this.setState({ category: \"random\" });\n    }\n\n    chooseCategory2() {\n        this.setState({ category: \"disney\" });\n    }\n\n    chooseCategory3() {\n        this.setState({ category: \"tvseries\" });\n    }\n\n    chooseCategory4() {\n        this.setState({ category: \"games\" });\n    }\n\n    doesUserExist() {\n        console.log(\"doesUserExist - START\");\n        axios.get('/api/email/' //+ 'test1@gmail.com') \n            + this.state.user.email)\n            .then(res => {\n                const persons = res.data;\n                console.log(\"success + \" + persons);\n                this.setState({ exists: persons });\n\n                if (!persons) {\n                    let body = {\n                        email: this.state.user.email,\n                        nickname: this.state.user.displayName\n                    }\n                    console.log(\"Body: \" + JSON.stringify(body));\n                    axios.post('/api/createUser', body)\n                }\n                console.log(\"Exists: \" + this.state.exists);\n            }).catch(err => {\n                console.log(\"GET ERR: \" + err);\n                console.log(\"URI: \" + process.env.MONGODB_URI);\n            });\n\n\n        // if (!this.state.exists) {\n        //     let body = {\n        //         email: this.state.user.email,\n        //         nickname: this.state.user.displayName\n        //     }\n        //     console.log(\"Body: \" + JSON.stringify(body));\n        //     axios.post(process.env.MONGODB_URI + '/api/createUser', body)\n        // }\n    }\n\n    render() {\n        return (\n            <div className=\"app\">\n                <div className=\"app__header\">\n                    {/* <img src={logo} className=\"app__logo\" alt=\"logo\" /> */}\n                    {this.state.user ? (\n                        // <button>\n                        //     Change Nickname\n                        // </button>\n                        // { this.doesUserExist.bind(this) }\n                        < h1>\n                            {\n                                this.state.exists ? (\n                                    <div>Welcome, <span>{this.state.exists.nickname}</span></div>\n                                ) : (<div>Welcome, <span>{this.state.user.displayName}</span></div>)\n                            }\n\n                        </h1>\n\n                    ) : (\n                            <h1>\n                                CHAT SHROOMS\n                            </h1>\n                        )}\n\n\n                    {this.state.user ? (\n                        // <button>\n                        //     Change Nickname\n                        // </button>\n                        <div>\n                            <Nickname email={this.state.email} />\n\n                        </div>\n\n                    ) : (\n                            <div></div>\n                        )}\n\n                </div>\n                {\n                    this.state.user ? (\n                        <div className=\"app__list\">\n                            {console.log(\"User to Form: \" + this.state.user.displayName)}\n                            {console.log(\"Email to Form: \" + this.state.user.email)}\n                            {console.log(\"Category: \" + this.state.category)}\n                        </div>\n                    ) : (\n                            <span className=\"login-first\">Please login first before proceeding with the chat</span>\n                        )\n                }\n                {\n                    this.state.user ? (\n                        <div className=\"app__list\">\n                            {console.log(\"User to Form: \" + this.state.user.displayName)}\n                            {console.log(\"Email to Form: \" + this.state.user.email)}\n                            {console.log(\"Category: \" + this.state.category)}\n                            <span className=\"login-first\">Please choose a category to proceed</span>\n                            <div>\n                                <button\n                                    className=\"app__button rounded \"\n                                    onClick={this.chooseCategory1.bind(this)}\n                                >\n                                    RANDOM\n                                </button>\n                                <button\n                                    className=\"app__button rounded \"\n                                    onClick={this.chooseCategory2.bind(this)}\n                                >\n                                    DISNEY\n                                </button>\n                                <button\n                                    className=\"app__button rounded \"\n                                    onClick={this.chooseCategory3.bind(this)}\n                                >\n                                    TV SERIES\n                                </button>\n                                <button\n                                    className=\"app__button rounded \"\n                                    onClick={this.chooseCategory4.bind(this)}\n                                >\n                                    GAMES\n                                </button>\n                            </div>\n                        </div>\n                    ) : (\n                            <div></div>\n                        )\n                }\n                {\n                    this.state.category && this.state.user ? (\n                        <div className=\"app__list\">\n                            {console.log(\"User to Form: \" + this.state.user.displayName)}\n                            {console.log(\"Email to Form: \" + this.state.user.email)}\n                            {console.log(\"Category: \" + this.state.category)}\n                            <Form user={this.state.user} category={this.state.category} />\n                        </div>\n                    ) : (\n                            <div></div>\n                        )\n                }\n                {\n                    !this.state.user ? (\n                        <div><button\n                            className=\"app__button rounded \"\n                            onClick={this.handleSignIn.bind(this)}\n                        >\n                            Sign in\n                            </button></div>\n                    ) : (\n                            // this.context.router.push(\"./App/App\")\n\n                            // <Router>\n                            //     <Route exact path=\"/\">\n                            //         {console.log(\"We were here\")}\n                            //         {this.state.user ? <Redirect to=\"/App\" /> : <Main />}\n                            // </Route>\n                            <div><button\n                                className=\"app__button rounded \"\n                                onClick={this.handleLogOut.bind(this)}\n                            >\n                                Logout\n                                </button></div>\n                            // {/* </Router> */}\n                            // <button\n                            //     className=\"app__button rounded \"\n                            //     onClick={this.handleLogOut.bind(this)}\n                            // >\n                            //     Logout\n                            //     </button>\n                        )\n                }\n                <Footer />\n            </div >\n        );\n    }\n}\nexport default Main;"]},"metadata":{},"sourceType":"module"}